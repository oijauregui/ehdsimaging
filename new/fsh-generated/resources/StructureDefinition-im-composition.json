{
  "resourceType": "StructureDefinition",
  "id": "im-composition",
  "extension": [
    {
      "url": "http://hl7.org/fhir/StructureDefinition/structuredefinition-fmm",
      "valueInteger": 1
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status",
      "valueCode": "draft"
    }
  ],
  "url": "http://hl7.eu/fhir/imaging/StructureDefinition/im-composition",
  "name": "ImComposition",
  "title": "Imaging Composition",
  "status": "draft",
  "description": "Clinical document used to represent a Imaging Study Report for the scope of the HL7 Europe project.",
  "fhirVersion": "5.0.0",
  "kind": "resource",
  "abstract": false,
  "type": "Composition",
  "baseDefinition": "http://hl7.eu/fhir/imaging/StructureDefinition/CompositionEu",
  "derivation": "constraint",
  "differential": {
    "element": [
      {
        "id": "Composition",
        "path": "Composition",
        "short": "Imaging Report composition",
        "definition": "Imaging Study Report composition.\n\nA composition is a set of healthcare-related information that is assembled together into a single logical document that \nprovides a single coherent statement of meaning, establishes its own context and that has clinical attestation with regard \nto who is making the statement.\n\nWhile a Composition defines the structure, it does not actually contain the content: rather the full content of a document is contained in a Bundle, \nof which the Composition is the first resource contained.\n\n\nThe `text` field of each section SHALL contain a textual representation of all listed entries."
      },
      {
        "id": "Composition.extension",
        "path": "Composition.extension",
        "min": 1
      },
      {
        "id": "Composition.extension:diagnosticreport-reference",
        "path": "Composition.extension",
        "sliceName": "diagnosticreport-reference",
        "min": 1,
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "http://hl7.eu/fhir/imaging/StructureDefinition/im-composition-diagnosticReportReference"
            ]
          }
        ]
      },
      {
        "id": "Composition.identifier",
        "path": "Composition.identifier",
        "min": 1
      },
      {
        "id": "Composition.type",
        "path": "Composition.type",
        "short": "Type of Imaging Diagnostic Report",
        "definition": "Specifies that it refers to a Imaging Report",
        "comment": "At least one DiagnosticReport.code.coding and Composition.type.coding SHALL be equal",
        "binding": {
          "strength": "preferred",
          "valueSet": "http://hl7.eu/fhir/imaging/ValueSet/im-reportType-eu-lab"
        }
      },
      {
        "id": "Composition.category:imaging",
        "path": "Composition.category",
        "sliceName": "imaging",
        "min": 1,
        "max": "1",
        "patternCodeableConcept": {
          "coding": [
            {
              "code": "18748-4",
              "system": "https://loinc.org/fhir/",
              "display": "Diagnostic imaging equipment"
            }
          ]
        }
      },
      {
        "id": "Composition.author",
        "path": "Composition.author",
        "slicing": {
          "discriminator": [
            {
              "type": "profile",
              "path": "$this"
            }
          ],
          "rules": "open",
          "ordered": false
        },
        "mustSupport": true
      },
      {
        "id": "Composition.author:author",
        "path": "Composition.author",
        "sliceName": "author",
        "min": 0,
        "max": "*",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://hl7.eu/fhir/base/StructureDefinition/practitionerRole-eu"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Composition.author:authoring-device",
        "path": "Composition.author",
        "sliceName": "authoring-device",
        "min": 0,
        "max": "*",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://hl7.org/fhir/StructureDefinition/Device"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Composition.attester",
        "path": "Composition.attester",
        "slicing": {
          "discriminator": [
            {
              "type": "value",
              "path": "mode"
            }
          ],
          "rules": "open",
          "ordered": false
        }
      },
      {
        "id": "Composition.attester:legalAuthenticator",
        "path": "Composition.attester",
        "sliceName": "legalAuthenticator",
        "min": 0,
        "max": "*",
        "mustSupport": true
      },
      {
        "id": "Composition.attester:legalAuthenticator.mode",
        "path": "Composition.attester.mode",
        "patternCodeableConcept": {
          "coding": [
            {
              "code": "legal"
            }
          ]
        }
      },
      {
        "id": "Composition.attester:legalAuthenticator.time",
        "path": "Composition.attester.time",
        "min": 1
      },
      {
        "id": "Composition.attester:legalAuthenticator.party",
        "path": "Composition.attester.party",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://hl7.eu/fhir/base/StructureDefinition/practitionerRole-eu"
            ]
          }
        ]
      },
      {
        "id": "Composition.attester:resultValidator",
        "path": "Composition.attester",
        "sliceName": "resultValidator",
        "min": 0,
        "max": "*",
        "mustSupport": true
      },
      {
        "id": "Composition.attester:resultValidator.mode",
        "path": "Composition.attester.mode",
        "patternCodeableConcept": {
          "coding": [
            {
              "code": "professional"
            }
          ]
        }
      },
      {
        "id": "Composition.attester:resultValidator.time",
        "path": "Composition.attester.time",
        "min": 1
      },
      {
        "id": "Composition.attester:resultValidator.party",
        "path": "Composition.attester.party",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://hl7.eu/fhir/base/StructureDefinition/practitionerRole-eu"
            ]
          }
        ]
      },
      {
        "id": "Composition.custodian",
        "path": "Composition.custodian",
        "short": "Organization that manages the Imaging Report",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://hl7.eu/fhir/base/StructureDefinition/organization-eu"
            ]
          }
        ]
      },
      {
        "id": "Composition.event",
        "path": "Composition.event",
        "slicing": {
          "discriminator": [
            {
              "type": "value",
              "path": "detail.concept"
            }
          ],
          "rules": "open",
          "ordered": false
        },
        "min": 2
      },
      {
        "id": "Composition.event:study",
        "path": "Composition.event",
        "sliceName": "study",
        "short": "Modality",
        "definition": "The type of imaging modality used to perform the study.",
        "min": 1,
        "max": "*",
        "mustSupport": true
      },
      {
        "id": "Composition.event:study.detail",
        "path": "Composition.event.detail",
        "min": 1,
        "type": [
          {
            "code": "CodeableReference",
            "targetProfile": [
              "http://hl7.eu/fhir/imaging/StructureDefinition/im-imagingstudy"
            ]
          }
        ],
        "binding": {
          "strength": "extensible",
          "valueSet": "https://dicom.nema.org/medical/dicom/current/output/chtml/part16/sect_CID_33.html"
        }
      },
      {
        "id": "Composition.event:procedure",
        "path": "Composition.event",
        "sliceName": "procedure",
        "short": "Study Type",
        "definition": "The type of imaging study performed.",
        "min": 1,
        "max": "*",
        "mustSupport": true
      },
      {
        "id": "Composition.event:procedure.detail",
        "path": "Composition.event.detail",
        "min": 1,
        "type": [
          {
            "code": "CodeableReference",
            "targetProfile": [
              "http://hl7.eu/fhir/imaging/StructureDefinition/im-procedure"
            ]
          }
        ],
        "binding": {
          "strength": "extensible",
          "valueSet": "https://www.hl7.org/fhir/valueset-procedure-reason.html"
        }
      },
      {
        "id": "Composition.section",
        "path": "Composition.section",
        "slicing": {
          "discriminator": [
            {
              "type": "value",
              "path": "code"
            }
          ],
          "rules": "open",
          "ordered": false
        },
        "min": 9
      },
      {
        "id": "Composition.section.code",
        "path": "Composition.section.code",
        "min": 1
      },
      {
        "id": "Composition.section:imagingstudy",
        "path": "Composition.section",
        "sliceName": "imagingstudy",
        "short": "Imaging Study",
        "definition": "This section holds information related to the imaging studies covered by this report.",
        "min": 1,
        "max": "1"
      },
      {
        "id": "Composition.section:imagingstudy.code",
        "path": "Composition.section.code",
        "patternCodeableConcept": {
          "coding": [
            {
              "code": "18726-0",
              "system": "http://loinc.org"
            }
          ]
        }
      },
      {
        "id": "Composition.section:imagingstudy.entry",
        "path": "Composition.section.entry",
        "slicing": {
          "discriminator": [
            {
              "type": "profile",
              "path": "$this"
            }
          ],
          "rules": "open",
          "ordered": false
        },
        "min": 1
      },
      {
        "id": "Composition.section:imagingstudy.entry:imagingstudy",
        "path": "Composition.section.entry",
        "sliceName": "imagingstudy",
        "short": "Imaging Study Reference",
        "definition": "This entry holds a reference to the Imaging Study instance that is associated with this Composition.",
        "min": 1,
        "max": "*",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://hl7.eu/fhir/imaging/StructureDefinition/im-imagingstudy"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Composition.section:order",
        "path": "Composition.section",
        "sliceName": "order",
        "short": "Order",
        "definition": "This section holds information related to the order for the imaging study.",
        "min": 1,
        "max": "1"
      },
      {
        "id": "Composition.section:order.code",
        "path": "Composition.section.code",
        "patternCodeableConcept": {
          "coding": [
            {
              "code": "55115-0",
              "system": "http://loinc.org",
              "display": "Order"
            }
          ]
        }
      },
      {
        "id": "Composition.section:order.entry",
        "path": "Composition.section.entry",
        "slicing": {
          "discriminator": [
            {
              "type": "profile",
              "path": "\"\"$this\"\""
            }
          ],
          "rules": "open",
          "ordered": false
        },
        "mustSupport": true
      },
      {
        "id": "Composition.section:order.entry:order",
        "path": "Composition.section.entry",
        "sliceName": "order",
        "short": "Order reference",
        "definition": "This entry holds a reference to the order for the Imaging Study and report.",
        "min": 0,
        "max": "*",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://hl7.eu/fhir/imaging/StructureDefinition/im-order"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Composition.section:history",
        "path": "Composition.section",
        "sliceName": "history",
        "short": "History",
        "min": 1,
        "max": "1"
      },
      {
        "id": "Composition.section:history.code",
        "path": "Composition.section.code",
        "patternCodeableConcept": {
          "coding": [
            {
              "code": "11329-0",
              "system": "http://loinc.org",
              "display": "History"
            }
          ]
        }
      },
      {
        "id": "Composition.section:procedure",
        "path": "Composition.section",
        "sliceName": "procedure",
        "short": "Procedure",
        "min": 1,
        "max": "1"
      },
      {
        "id": "Composition.section:procedure.code",
        "path": "Composition.section.code",
        "patternCodeableConcept": {
          "coding": [
            {
              "code": "55111-9",
              "system": "http://loinc.org",
              "display": "Procedure"
            }
          ]
        }
      },
      {
        "id": "Composition.section:procedure.entry",
        "path": "Composition.section.entry",
        "slicing": {
          "discriminator": [
            {
              "type": "profile",
              "path": "$this"
            }
          ],
          "rules": "open",
          "ordered": false
        }
      },
      {
        "id": "Composition.section:procedure.entry:procedure",
        "path": "Composition.section.entry",
        "sliceName": "procedure",
        "min": 0,
        "max": "*",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://hl7.eu/fhir/imaging/StructureDefinition/im-procedure"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Composition.section:comparison",
        "path": "Composition.section",
        "sliceName": "comparison",
        "short": "History",
        "min": 1,
        "max": "1"
      },
      {
        "id": "Composition.section:comparison.code",
        "path": "Composition.section.code",
        "patternCodeableConcept": {
          "coding": [
            {
              "code": "18834-2",
              "system": "http://loinc.org",
              "display": "Comparison"
            }
          ]
        }
      },
      {
        "id": "Composition.section:comparison.entry",
        "path": "Composition.section.entry",
        "slicing": {
          "discriminator": [
            {
              "type": "profile",
              "path": "$this"
            }
          ],
          "rules": "open",
          "ordered": false
        },
        "mustSupport": true
      },
      {
        "id": "Composition.section:comparison.entry:comparedstudy",
        "path": "Composition.section.entry",
        "sliceName": "comparedstudy",
        "min": 0,
        "max": "*",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://hl7.eu/fhir/imaging/StructureDefinition/im-imagingstudy",
              "http://hl7.eu/fhir/imaging/StructureDefinition/im-imaging-selection"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Composition.section:findings",
        "path": "Composition.section",
        "sliceName": "findings",
        "short": "Findings",
        "min": 1,
        "max": "1"
      },
      {
        "id": "Composition.section:findings.code",
        "path": "Composition.section.code",
        "patternCodeableConcept": {
          "coding": [
            {
              "code": "59776-5",
              "system": "http://loinc.org",
              "display": "Findings"
            }
          ]
        }
      },
      {
        "id": "Composition.section:findings.entry",
        "path": "Composition.section.entry",
        "slicing": {
          "discriminator": [
            {
              "type": "profile",
              "path": "$this"
            }
          ],
          "rules": "open",
          "ordered": false
        },
        "mustSupport": true
      },
      {
        "id": "Composition.section:findings.entry:finding",
        "path": "Composition.section.entry",
        "sliceName": "finding",
        "min": 0,
        "max": "*",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://hl7.eu/fhir/imaging/StructureDefinition/im-finding"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Composition.section:findings.entry:keyimage",
        "path": "Composition.section.entry",
        "sliceName": "keyimage",
        "min": 0,
        "max": "*",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://hl7.eu/fhir/imaging/StructureDefinition/im-keyimages-document-reference",
              "http://hl7.eu/fhir/imaging/StructureDefinition/im-keyimage-imaging-selection"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Composition.section:impression",
        "path": "Composition.section",
        "sliceName": "impression",
        "short": "Impressions",
        "min": 1,
        "max": "1"
      },
      {
        "id": "Composition.section:impression.code",
        "path": "Composition.section.code",
        "patternCodeableConcept": {
          "coding": [
            {
              "code": "19005-8",
              "system": "http://loinc.org",
              "display": "Impression"
            }
          ]
        }
      },
      {
        "id": "Composition.section:impression.entry",
        "path": "Composition.section.entry",
        "slicing": {
          "discriminator": [
            {
              "type": "profile",
              "path": "$this"
            }
          ],
          "rules": "open",
          "ordered": false
        },
        "mustSupport": true
      },
      {
        "id": "Composition.section:impression.entry:finding",
        "path": "Composition.section.entry",
        "sliceName": "finding",
        "min": 0,
        "max": "*",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://hl7.eu/fhir/imaging/StructureDefinition/im-finding"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Composition.section:impression.entry:impression",
        "path": "Composition.section.entry",
        "sliceName": "impression",
        "min": 0,
        "max": "*",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://hl7.eu/fhir/imaging/StructureDefinition/ConditionEU"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Composition.section:impression.entry:keyimage",
        "path": "Composition.section.entry",
        "sliceName": "keyimage",
        "min": 0,
        "max": "*",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://hl7.eu/fhir/imaging/StructureDefinition/im-keyimages-document-reference",
              "http://hl7.eu/fhir/imaging/StructureDefinition/im-keyimage-imaging-selection"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Composition.section:recommendation",
        "path": "Composition.section",
        "sliceName": "recommendation",
        "short": "Recommendations",
        "min": 1,
        "max": "1"
      },
      {
        "id": "Composition.section:recommendation.code",
        "path": "Composition.section.code",
        "patternCodeableConcept": {
          "coding": [
            {
              "code": "18783-1",
              "system": "http://loinc.org",
              "display": "Recommendation"
            }
          ]
        }
      },
      {
        "id": "Composition.section:recommendation.entry",
        "path": "Composition.section.entry",
        "slicing": {
          "discriminator": [
            {
              "type": "profile",
              "path": "$this"
            }
          ],
          "rules": "open",
          "ordered": false
        },
        "mustSupport": true
      },
      {
        "id": "Composition.section:recommendation.entry:recommendedCarePlan",
        "path": "Composition.section.entry",
        "sliceName": "recommendedCarePlan",
        "min": 0,
        "max": "*",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://hl7.eu/fhir/imaging/StructureDefinition/CarePlanEu"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Composition.section:communication",
        "path": "Composition.section",
        "sliceName": "communication",
        "short": "Communications",
        "min": 1,
        "max": "1"
      },
      {
        "id": "Composition.section:communication.code",
        "path": "Composition.section.code",
        "patternCodeableConcept": {
          "coding": [
            {
              "code": "18783-1",
              "system": "http://loinc.org",
              "display": "Communication"
            }
          ]
        }
      }
    ]
  }
}
